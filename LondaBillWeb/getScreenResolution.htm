<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
    <title></title>
</head>
    <!-- Получение разрешения экрана клиента и передача его на сервер. -->
    <script language="javascript" type="text/javascript">
        function getResolution() 
        {
            var req;
            if (window.XMLHttpRequest)
                req = new XMLHttpRequest();
            else
            {
                if (window.ActiveXObject)
                    req = new ActiveXObject("Microsoft.XMLHTTP");
                else
                {
                    alert('Неподдерживаемый браузер или его настройки!   ');
                    return;
                }
            }
            // Выполняем код только на мобильных браузерах (на всякий случай)
            var wdth;
            var hght;
            var kyda = 0;
            if (typeof (window.orientation) !== 'undefined') {
                var ua = navigator.userAgent.toLowerCase();
                var isAndroid = ua.indexOf("android") > -1; // Detect Android devices
                var isq100l = ua.indexOf("np101") > -1; // Detect Bravis q100l
                if (isAndroid) {
                    //window.orientation is different for iOS and Android
                    if (window.orientation == 0 || window.orientation == 180) { //Portrait Mode
                        if (window.devicePixelRatio !== 1) { // Костыль для определения иных устройств, с коэффициентом отличным от 1
                            var dpt = window.devicePixelRatio;
                            hght = window.screen.width * dpt;
                            hght = hght - hght / 100 * 15;
                            wdth = window.screen.height * dpt;
                            kyda = 1;
                        }
                        else {
                            if (isq100l) {
                                hght = 470;
                                wdth = 1000;
                                kyda = 2;
                            }
                            else {
                                hght = window.screen.width;
                                hght = hght - hght / 100 * 15;
                                wdth = window.screen.height;
                                kyda = 3;
                            }
                        }
                    }
                    else if (window.orientation == 90 || window.orientation == -90) { //Landscape Mode
                        if (window.devicePixelRatio !== 1) { // Костыль для определения иных устройств, с коэффициентом отличным от 1
                            var dpt = window.devicePixelRatio;
                            wdth = window.screen.width * dpt;
                            hght = window.screen.height * dpt;
                            hght = hght - hght / 100 * 15;
                            kyda = 4;
                        }
                        else {
                            if (isq100l) {
                                hght = 470;
                                wdth = 1000;
                                kyda = 5;
                            }
                            else {
                                wdth = window.screen.width;
                                hght = window.screen.height;
                                hght = hght - hght / 100 * 15;
                                kyda = 6;
                            }
                        }
                    }
                }
                else {
                    if (window.orientation == 90 || window.orientation == -90) { //Landscape Mode
                        if (window.devicePixelRatio !== 1) { // Костыль для определения иных устройств, с коэффициентом отличным от 1
                            var dpt = window.devicePixelRatio;
                            hght = window.screen.width * dpt;
                            wdth = window.screen.height * dpt;
                            hght = hght - hght / 100 * 5;
                            wdth = wdth - wdth / 100 * 10;
                            kyda = 7;

                        }
                        else {
                            hght = window.screen.width;
                            wdth = window.screen.height;
                            hght = hght - hght / 100 * 5;
                            wdth = wdth - wdth / 100 * 10;
                            kyda = 8;

                        }
                    }
                    else if (window.orientation == 0 || window.orientation == 180) { //Portrait Mode
                        if (window.devicePixelRatio !== 1) { // Костыль для определения иных устройств, с коэффициентом отличным от 1
                            var dpt = window.devicePixelRatio;
                            hght = window.screen.width * dpt;
                            wdth = window.screen.height * dpt;
                            hght = hght - hght / 100 * 5;
                            wdth = wdth - wdth / 100 * 10;
                            kyda = 9;

                        }
                        else {
                            hght = window.screen.width;
                            wdth = window.screen.height;
                            hght = hght - hght / 100 * 5;
                            wdth = wdth - wdth / 100 * 10;
                            kyda = 10;

                        }
                    }
                }
                
                
            }
            else {
                wdth = window.screen.width;
                hght = window.screen.height;
                kyda = 11;

            }
            var width = wdth.toString();
            var height = hght.toString();
            
            if (width.indexOf(".") !== -1) {
                width = width.substring(0, width.indexOf("."));
            }
            if (height.indexOf(".") !== -1) {
                height = height.substring(0, height.indexOf("."));
            }
            req.open("GET", "ScreenResolutionSetter.axd?ScreenResolutionW=" + width + "&ScreenResolutionH=" + height + "&Tmp=" + kyda, false);
            req.send(null);

            // дело сделали, можно уходить на оригинальную страницу
            document.location.reload();
        }
    </script>

<body onload="getResolution()">
</body>
</html>